# Spotlight 홍보 접수·스케줄·결제 PRD (v0.1)

> 작성일: 2025-09-10 (Asia/Seoul)
> 작성 목적: 공연 단체가 웹페이지에서 홍보 요청을 접수하면 자동으로 **채널 업로드 스케줄**과 **마케팅 전략 제안**을 생성하고, **요금제/금액에 따라 결제**까지 완료되는 End-to-End 흐름을 설계한다.

---

## 1. 배경 & 목표

* 기존 기업 소개 웹사이트(알터즈/Spotlight) 위에 **홍보 문의(접수) → 검토 → 스케줄/전략 생성 → 결제 → 제작/퍼블리싱 → 리포트**의 일련의 파이프라인을 수립한다.
* 수집 데이터는 자동으로 구조화(데이터베이스화)되어 운영팀/클라이언트 모두가 확인 가능한 **대시보드**에서 관리되도록 한다.
* 인스타그램(Spotlight), 네이버 블로그(Artause), 뉴스레터 등 멀티 채널 운영을 전제로 **채널별 업로드 캘린더**를 자동 생성한다.

### 성공지표 (예시)

* 폼 제출→결제로 이어지는 전환율 ≥ 25%
* 폼 제출 후 “초안 스케줄/전략 제안” 생성까지 ≤ 30초
* 결제 완료까지 평균 소요시간 ≤ 10분
* 재의뢰율(동일 단체 3개월 내 재의뢰) ≥ 20%

---

## 2. 범위

### In Scope

* 홍보 접수 폼(웹) & 기본 계정 생성(선택)
* 제출 즉시 **초안 채널 스케줄**과 **전략 제안** 자동 생성 (AI/룰 기반 혼합)
* 요금제/옵션 선택 및 결제 (PG 연동)
* 관리 콘솔(운영자): 큐(Triage), 스케줄 편집, 전략 템플릿 편집, 견적/세금계산서/현금영수증 발행, 진행 상태 관리
* 클라이언트 대시보드: 접수 현황, 제출 자료, 결제 영수증, 일정, 승인/수정 요청, 결과 리포트 열람
* 알림: 이메일(필수), 카카오 알림톡/슬랙(선택), 캘린더(구글) 연동

### Out of Scope (v0.1)

* 인스타그램/블로그 **자동 게시**(Meta Graph API 제약). v0.1은 **스케줄/에셋 패키징과 퍼블리싱 체크리스트**까지 제공, 업로드는 반자동(운영자 승인 후 툴/앱으로 업로드).
* 정교한 실시간 성과 추적(픽셀/광고계정 연동 심화). v0.1은 기본 지표만.

---

## 3. 페르소나

* **공연 단체 담당자(클라이언트)**: 소극장/극단 홍보 담당. 일정·예산 제한, 빠른 견적·일정 확정 선호.
* **운영자(알터즈/Spotlight 팀)**: 요청 검토, 리소스 배분, 채널 캘린더 관리, 결제/세무 처리.
* **디자이너/에디터**: 카드뉴스/릴스 제작, 카피라이팅 리뷰, 업로드 실행.

---

## 4. 핵심 사용자 시나리오

1. 공연 단체가 ‘Spotlight 홍보 요청’ 페이지에서 폼 작성→제출.
2. 시스템이 **초안 업로드 캘린더**와 **전략 제안(카피 톤, 포맷 믹스, 해시태그/협업 아이디어)** 생성.
3. 사용자에게 **요금제/옵션**과 함께 결과 미리보기 제공 → 항목 선택 후 결제.
4. 결제 완료 시 **제작 To‑Do, 마감일, 승인 라운드**가 생성되고 알림 발송.
5. 운영자가 필요 시 스케줄/전략을 편집·확정.
6. 퍼블리싱 후 **성과 리포트(기본)** 제공.

---

## 5. 정보구조(IA)

* 홈(회사 소개) / Services / **Promote with Spotlight(접수)** / Pricing / Checkout / **My Dashboard** / Admin

---

## 6. 플로우 (요약)

**접수 폼 제출 →(AI/룰)** 스케줄 & 전략 생성 → 요금제 제안 → 결제(카드/KakaoPay/계좌이체 등) → 제작 파이프라인 생성 → 승인 → 게시 → 리포트.

---

## 7. 기능 요구사항 (FRD)

### 7.1 접수 폼(Form)

필드(예시):

* 기본: 단체명, 담당자명, 이메일, 휴대폰, 사업자등록번호(선택/B2B), 과금 주체(개인/사업자)
* 공연 정보: 작품명, 장르, 포스터/키비주얼 업로드, 시놉시스(500자), 주요 카피 포인트(희망 톤&무드), 일정(공연기간/오픈런), 공연 장소, 좌석수, 목표 관객층(연령/관심사), 경쟁작/레퍼런스
* 마케팅: 목표(인지/예매/후기), 희망 채널(IG 피드/릴스/스토리/블로그/뉴스레터), 티켓 이벤트 여부, 희망 업로드 기간/빈도, 엠바고/금지어, 협업 가능 인플루언서/파트너, 예산 범위
* 에셋: 이미지/영상, 로고(CI), 폰트/색상 가이드, 사용 허가 범위(UGC/2차 활용 동의), 저작권·초상권 확인 체크
* 결제/정책 동의: 약관/개인정보/환불 규정 동의 체크박스

기능:

* 파일 다중 업로드(확장자/용량 제한), 자동 썸네일, 중복 검사
* 실시간 유효성, 저장 후 이어쓰기(임시 저장 링크)
* 제출 후 요약 확인 페이지 + 이메일 영수증(폼 사본)

### 7.2 스케줄러(채널 캘린더)

* 규칙 기반 + AI 보조:

  * KST 기준 **업로드 슬롯**: 평일 10:00/13:00/19:00, 주말 11:00/18:00 (초안 값, 운영자 편집 가능)
  * 우선순위: 공연 오픈 임박/엠바고, 유료 패키지 등급, 채널 과밀도, 카테고리 다양성, 상호 프로모션 일정
  * 산출물: 채널별 게시 일시, 포맷(피드/릴스/스토리/블로그), 간단 이유/목표 KPI
* 충돌 감지: 동일 시간대 중복, 채널 과포화 경고
* 캘린더 내보내기: Google Calendar / ICS

### 7.3 전략 제안(초안)

* 톤&무드(예: 진정성/인터랙티브/지식형) + 주요 카피 구조(훅/가치/CTA)
* 포맷 믹스: 릴스(60초 지식/하이라이트), 카드뉴스(시놉/배우/후기), 스토리(투표/QA), 블로그(확장 리뷰)
* 해시태그/키워드·콜라보 제안, 티켓 이벤트 설계(조건/경품 수량/DM 루틴)
* 제작 체크리스트: 필수 컷리스트, 자막/폰트, 색상, 썸네일 레이아웃

### 7.4 요금제 & 결제

* **패키지(예시)**

  * Basic (₩149,000): 채널 1종(피드 1, 스토리 2), 기본 카피, 캘린더 제공
  * Standard (₩399,000): 채널 2종(피드 2, 릴스 1, 스토리 4), 전략 제안 심화, 간단 리포트
  * Pro (₩890,000): 채널 3종 풀믹스, 카드뉴스 1세트, 릴스 2, 인플루언서 콜라보 제안, 성과 리포트
  * Add‑ons: 포스터 리디자인, 사진/프로필 촬영, 티켓관리/이벤트 운영, 급행(Express) 등

* **결제 수단(PortOne · Iamport 연동)**

  * 카드, **KakaoPay**, 계좌이체, 가상계좌(입금확인)
  * B2B 전자세금계산서 / B2C 현금영수증 발행(결제 완료 후 자동/수동 트리거)

* **결제 플로우(요약)**

  1. 주문(orders) 프리-생성: `merchant_uid` 발급(고유) · 금액·부가세 확정
  2. FE에서 PortOne 결제창 호출 → 완료 시 `imp_uid` 수신
  3. BE에서 PortOne REST API로 `imp_uid` **서버 검증**(금액/상태 일치 확인)
  4. 일치 시 `orders.status = paid`로 업데이트, 영수증/세금계산서 트리거, 웹훅 대기
  5. 가상계좌는 `ready` → 입금 웹훅 수신 시 `paid` 전환
  6. 실패/취소 시 사유 기록 및 재시도 유도, 재사용 불가한 `merchant_uid` 보호

* **웹훅 처리(권장)**

  * Endpoint: `/api/payments/webhook/portone`
  * 수신 필드(예): `imp_uid`, `merchant_uid`, `status(paid, failed, cancelled)`, `pay_method`, `pg_provider`, `paid_at`, `receipt_url`
  * 검증: 수신 즉시 REST 재검증 → DB 상태 동기화(멱등 처리)

* **환불/취소**

  * Admin에서 전액/부분 취소 입력 → PortOne API 호출 → 성공 시 `orders.status = refunded/partial_refunded`, 금액 로그·사유 기록
  * 가맹점 수수료·정책에 따른 단계별 환불 규정 적용

* **세무**

  * B2B: 전자세금계산서 발행(결제일 익영업일 기준)
  * B2C: 현금영수증(가상계좌/계좌이체)

### 7.5 대시보드(클라이언트)

* 현재 상태(대기/검토/결제 대기/제작/승인 대기/게시/완료), 예정 일정, 제출 자료/에셋, 결제·세금계산서, 수정요청/커뮤니케이션 스레드, 결과 리포트(기본 KPI)(클라이언트)
* 현재 상태(대기/검토/결제 대기/제작/승인 대기/게시/완료), 예정 일정, 제출 자료/에셋, 결제·세금계산서, 수정요청/커뮤니케이션 스레드, 결과 리포트(기본 KPI)

### 7.6 Admin(운영자)

* 접수 큐(Triage), 우선순위/태깅, 스케줄 보드(드래그&드롭), 전략 템플릿 라이브러리, 체크리스트/QA, 알림 설정, 정산/세무, 이용통계

### 7.7 알림/커뮤니케이션

* 제출/결제/승인/게시/리포트 단계별 이메일 알림(필수)
* 카카오 알림톡(선택), 슬랙 채널로 운영 알림(내부)

### 7.8 리포팅(기본)

* 게시 내역, 예상 vs 실제(조회/좋아요/댓글/저장) 수기 입력 또는 반자동 수집, 링크 클릭(가능 시 UTM)

---

## 8. 데이터 모델(초안)

**organizations**(id, name, biz\_no, type, billing\_email, created\_at)

**contacts**(id, org\_id, name, email, phone)

**campaigns**(id, org\_id, title, genre, synopsis, venue, run\_start, run\_end, seat\_count, target\_audience, goals, budget\_min, budget\_max, embargo\_at, preferences\_json, status, created\_at)

**assets**(id, campaign\_id, type(img/video/logo/font), url, rights\_ok bool, notes)

**plans**(id, name, description, price\_krw, deliverables\_json, active)

**orders**(id, campaign\_id, plan\_id, amount\_krw, vat\_krw, payment\_method, status, invoice\_no, cash\_receipt\_no, merchant\_uid, imp\_uid, pg\_provider, receipt\_url, paid\_at, webhook\_log\_json, created\_at)

**schedule\_items**(id, campaign\_id, channel(ig\_feed/reels/story/blog), slot\_at KST, format\_meta, status, notes)

**strategy\_briefs**(id, campaign\_id, tone, hooks, format\_mix\_json, hashtags, influencers\_json, checklist\_json, generated\_by(ai/rule/human), version)

**approvals**(id, campaign\_id, item\_type(strategy/schedule/creative), version, approved\_by, approved\_at)

**reports**(id, campaign\_id, kpi\_json, summary, period\_start, period\_end)

---

## 9. 기술 아키텍처(제안)

* FE: Next.js(App Router) + Tailwind + shadcn/ui
* BE: Supabase(Postgres + Auth + Storage) 또는 Next API Route + Prisma
* 결제: PortOne(Iamport) SDK
* 이메일: Resend/SendGrid
* 알림: 카카오 비즈메시지(알림톡) 연동(추후)
* 캘린더: Google Calendar API(캠페인별 캘린더 공유)
* 파일 저장: Supabase Storage or S3
* AI: 서버 사이드(LangChain/LLM API) + 룰 엔진(우선순위/슬롯 규칙)

---

## 10. 스케줄러 로직(의사코드)

```
inputs = campaign(run_start, run_end, embargo_at, channel_prefs, plan_tier)
slots = default_slots(KST) // 평일 10/13/19, 주말 11/18
blocklist = existing_schedule(conflicts)
priority = score(plan_tier, days_to_opening, novelty, channel_balance)

for each required_deliverable in plan_tier:
  candidate = next_available_slot(slots, embargo_at, blocklist, priority)
  place(candidate); blocklist.add(candidate)
```

---

## 11. 보안/개인정보/컴플라이언스

* 개인정보 최소 수집·암호화 저장(민감정보 금지), 한국 **개인정보보호법(PIPA)** 준수, 보관기간/파기 정책 명시
* 저작권·초상권·상표 사용 동의 체크 의무화, 업로드 에셋의 라이선스 기록
* 결제는 **PG사 인증/토큰화** 이용, 카드정보 미보관
* 로그/감사 기록(승인·수정 이력)

---

## 12. 접근성/다국어

* WCAG 2.1 AA 준수(키보드 내비게이션, 명도 대비), 한/영 UI(향후)

---

## 13. 운영 정책(요약)

* SLA(내부): 접수 후 24h 내 1차 검토·피드백, 결제 후 48h 내 제작 킥오프
* 환불/변경/마감(엠바고) 정책 문서화, 비상(이슈/사고) 대응 플레이북

---

## 14. 수락 기준(샘플)

* \[AC‑1] 폼 제출 후 30초 내 초안 스케줄 ≥1건, 전략 제안 ≥1건 생성되어 요약 페이지에 표시된다.
* \[AC‑2] **PortOne 결제** 완료 시 주문 상태가 "paid"로 전환되고 영수증/세금계산서 이메일이 발송된다(서버 검증 및 웹훅 멱등 지원).
* \[AC‑3] Admin 보드에서 드래그&드롭으로 슬롯 이동 시 캘린더/클라이언트 대시보드에 1분 내 동기화된다.
* \[AC‑4] 가상계좌 결제의 경우 입금 웹훅 수신 후 1분 내 상태가 paid로 갱신된다.
* \[AC‑5] **Studio 링크아웃** 클릭 시 새 탭에서 스튜디오 외부 사이트가 열리며 UTM 파라미터가 유지된다.
* \[AC‑1] 폼 제출 후 30초 내 초안 스케줄 ≥1건, 전략 제안 ≥1건 생성되어 요약 페이지에 표시된다.
* \[AC‑2] 결제 완료 시 주문 상태가 "paid"로 전환되고 영수증 이메일이 발송된다.
* \[AC‑3] Admin 보드에서 드래그&드롭으로 슬롯 이동 시 캘린더/클라이언트 대시보드에 1분 내 동기화된다.

---

## 15. 테스트 케이스(발췌)

* TC‑Form‑01: 필수 필드 누락 시 인라인 에러 표시 및 제출 차단
* TC‑Sched‑02: 엠바고 이전 슬롯 배치 금지 확인
* TC‑Pay‑03: 카드 결제 취소/실패 시 재시도 유도 및 상태 롤백
* TC‑Pay‑04: PortOne 웹훅 `paid` 수신 시 서버 검증 통과 후 orders 상태 멱등 업데이트
* TC‑Pay‑05: 가상계좌 `ready`→입금→`paid` 전환 플로우 검증
* TC‑Pay‑06: 환불/부분환불 API 응답 반영 및 금액 로그 검증
* TC‑Link‑01: Studio 링크 클릭 시 새 탭으로 외부 스튜디오 사이트 열림(UTM 보존), 404/타임아웃 대비 폴백 문구 노출
* TC‑Form‑01: 필수 필드 누락 시 인라인 에러 표시 및 제출 차단
* TC‑Sched‑02: 엠바고 이전 슬롯 배치 금지 확인
* TC‑Pay‑03: 결제 취소/실패 시 재시도 유도 및 상태 롤백
* TC‑Rights‑04: 권리 동의 미체크 시 파일 업로드 허용 안 함

---

## 16. 롤아웃 계획

* v0.1(2\~4주): 폼→초안 스케줄/전략→고정 패키지 결제→대시보드 기본
* v0.2: Admin 드래그&드롭 캘린더, 전략 템플릿 라이브러리
* v0.3: 리포트 고도화, 알림톡, 간이 자동 업로드 보조(반자동)

---

## 17. 리스크 & 완화

* IG 자동 업로드 제한 → 반자동 워크플로우 + 체크리스트로 보완
* 에셋 저작권 분쟁 → 권리 확인 절차 강화·로그 기록
* 일정 과밀/리소스 부족 → 슬롯 상한, 대기열/리드타임 경고

---

## 18. 오픈 질문

1. 가격/패키지 최종안과 급행(Express) 정책 범위?
2. 인플루언서 협업은 내부 풀 보유 vs 외부 매칭(수수료 구조)?
3. 블로그/뉴스레터 채널 우선순위와 KPI 기준은?
4. 스튜디오 외부 사이트 UTM 규칙(소스/미디움/캠페인) 합의 필요.

---

## 19. Studio(알터즈 스튜디오) 링크아웃 정책

* **IA 반영**: 네비게이션 "Studio" 또는 "알터즈 스튜디오" 클릭 시 **새 탭으로 외부 촬영 스튜디오 사이트**(예: culink\_space 운영 도메인) 링크아웃.
* **트래킹**: `?utm_source=artause_site&utm_medium=nav&utm_campaign=studio_linkout` 기본 부여, 필요 시 캠페인별 커스터마이즈.
* **UI 안내**: 툴팁/작은 배지로 "외부 사이트로 이동" 표시.
* **가용성 폴백**: 5초 이상 타임아웃/오류 시 안내 모달(재시도·연락처) 제공.
* **브랜딩**: 로고·컬러 일치 가이드 공유(외부 사이트와 공통 컴포넌트 사용 권장).
* **보안**: `rel="noopener noreferrer"` 적용, 허용 도메인 화이트리스트.
